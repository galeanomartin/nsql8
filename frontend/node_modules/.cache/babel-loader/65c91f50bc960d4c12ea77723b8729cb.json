{"ast":null,"code":"var _jsxFileName = \"/frontend/src/components/Mapa.js\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport { Map, TileLayer } from 'react-leaflet';\nimport './../app.css';\nimport { list_restaurants, alertError, list_categories, list_restaurants_type } from \"../utils/functions\";\nimport MarkerList from \"./MarkerList\";\n\nconst Mapa = () => {\n  const [search, setSearch] = useState(\"\");\n  const [lastSearch, setLastSearch] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [restaurants, setRestaurants] = useState([]);\n  const [currentRestaurants, setCurrentRestaurants] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (search === \"\") {\n      setCurrentRestaurants(restaurants);\n      setLastSearch(search);\n    } else {\n      setLoading(true);\n      list_restaurants_type(search).then(res => {\n        setCurrentRestaurants(res);\n        setLastSearch(search);\n        setLoading(false);\n      }).catch(err => {\n        setLoading(false);\n        alertError();\n      });\n    }\n  }, [search]);\n  useEffect(() => {\n    setLoading(true);\n    list_restaurants().then(res => {\n      setRestaurants(res);\n      setCurrentRestaurants(res);\n      list_categories().then(res => {\n        setCategories(res);\n        setLoading(false);\n      }).catch(err => {\n        setLoading(false);\n        alertError();\n      });\n    }).catch(err => {\n      setLoading(false);\n      alertError();\n      return;\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }), loading ? /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Cargando datos aguarde por favor....\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"input-group-append\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Filtrar por tipo de comida\")), /*#__PURE__*/React.createElement(\"select\", {\n    class: \"custom-select\",\n    onChange: e => setSearch(e.target.value),\n    defaultValue: lastSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, \"Todas las categor\\xEDas\"), categories.map(item => /*#__PURE__*/React.createElement(\"option\", {\n    value: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, item)))), /*#__PURE__*/React.createElement(Map, {\n    center: [40.730610, -73.935242],\n    zoom: 4,\n    minZoom: 2,\n    preferCanvas: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.osm.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(MarkerList, {\n    list: currentRestaurants,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }))));\n};\n\nexport default Mapa;","map":{"version":3,"sources":["/frontend/src/components/Mapa.js"],"names":["React","Fragment","useState","useEffect","Map","TileLayer","list_restaurants","alertError","list_categories","list_restaurants_type","MarkerList","Mapa","search","setSearch","lastSearch","setLastSearch","categories","setCategories","restaurants","setRestaurants","currentRestaurants","setCurrentRestaurants","loading","setLoading","then","res","catch","err","e","target","value","map","item"],"mappings":"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","sourcesContent":["import React,{Fragment,useState,useEffect} from \"react\";\nimport {Map,TileLayer} from 'react-leaflet';\nimport './../app.css';\nimport { list_restaurants, alertError, list_categories, list_restaurants_type } from \"../utils/functions\";\nimport MarkerList from \"./MarkerList\";\n\nconst Mapa = () => {\n\n    const [search,setSearch] = useState (\"\");\n    const [lastSearch,setLastSearch] = useState (\"\");\n    \n    const [categories,setCategories] = useState ([])\n    const [restaurants,setRestaurants] = useState ([]);\n    const [currentRestaurants,setCurrentRestaurants] = useState ([]);\n    const [loading,setLoading] = useState (false);\n\n    useEffect(()=>{\n        if (search === \"\"){  \n          setCurrentRestaurants (restaurants);\n          setLastSearch (search)\n        }else{\n          setLoading (true);\n          list_restaurants_type (search)\n          .then (res=>{\n            setCurrentRestaurants (res);\n            setLastSearch (search)\n            setLoading (false);\n          })\n          .catch (err=>{\n            setLoading (false);\n            alertError ();\n          })\n        }\n    },[search])\n\n    useEffect (()=>{\n        setLoading (true);\n        list_restaurants ()\n        .then (res=>{\n          setRestaurants (res);\n          setCurrentRestaurants (res);\n          list_categories ()\n          .then (res=>{\n            setCategories (res);\n            setLoading (false);\n          })\n          .catch (err=>{\n            setLoading (false);\n            alertError ();\n          })\n        })\n        .catch (err=>{\n          setLoading (false);\n          alertError ();\n          return;\n        })\n    },[])\n\n    return (\n      <Fragment>\n        <br />\n      \n        <br/>\n        {(loading)?\n        \n        <h2>Cargando datos aguarde por favor....</h2>\n        :\n        \n        <div>\n            <div class=\"input-group\">\n              <div class=\"input-group-append\">\n                <span class=\"input-group-text\">Filtrar por tipo de comida</span>\n              </div>\n              <select class=\"custom-select\" onChange={(e)=>setSearch(e.target.value)} defaultValue={lastSearch}>\n                <option value=\"\">Todas las categorías</option>\n                {categories.map((item)=>(\n                    <option value={item}>{item}</option>\n                ))}\n              </select>\n            </div>\n        <Map center={[40.730610,-73.935242]} zoom={4} minZoom={2} preferCanvas={true}>\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url='https://{s}.tile.osm.org/{z}/{x}/{y}.png'\n        />\n        <MarkerList list={currentRestaurants} />\n        </Map>\n        </div>\n        \n        }\n        \n      </Fragment>\n    );\n};\n\nexport default Mapa;"]},"metadata":{},"sourceType":"module"}